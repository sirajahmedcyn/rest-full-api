<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Blog</title>
    <style>
        :root { --primary: #2563eb; --dark: #1e293b; --light: #f3f4f6; --white: #ffffff; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--light); color: var(--dark); margin: 0; padding: 0; line-height: 1.6; }
        
        /* Header */
        header { background: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        nav { max-width: 1200px; margin: 0 auto; padding: 1rem 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); text-decoration: none; }
        .nav-links a { color: var(--dark); text-decoration: none; margin-left: 20px; font-weight: 500; transition: color 0.3s; }
        .nav-links a:hover { color: var(--primary); }
        .btn-login { background: var(--primary); color: var(--white) !important; padding: 8px 20px; border-radius: 50px; }

        /* Hero */
        .hero { background: var(--dark); color: var(--white); padding: 4rem 20px; text-align: center; margin-bottom: 3rem; }
        .hero h1 { font-size: 2.5rem; margin-bottom: 1rem; }
        
        /* Grid */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px 40px; }
        .posts-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
        
        @media (max-width: 900px) {
            .posts-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 600px) {
            .posts-grid { grid-template-columns: 1fr; }
        }
        
        /* Card */
        .post-card { background: var(--white); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); transition: transform 0.3s, box-shadow 0.3s; display: flex; flex-direction: column; }
        .post-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .post-image { width: 100%; height: 220px; object-fit: cover; background: #e2e8f0; }
        .post-content { padding: 20px; flex: 1; display: flex; flex-direction: column; }
        .category-badge { background: #e0f2fe; color: var(--primary); padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; display: inline-block; margin-bottom: 10px; }
        .post-title { font-size: 1.25rem; margin: 0 0 10px; color: var(--dark); }
        .post-excerpt { color: #64748b; font-size: 0.95rem; margin-bottom: 20px; flex: 1; }
        .post-footer { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #f1f5f9; padding-top: 15px; font-size: 0.85rem; color: #94a3b8; }
        .tags { margin-top: 10px; }
        .tag { color: #64748b; font-size: 0.8rem; margin-right: 5px; }
        .tag::before { content: '#'; }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">Rest Full Api Site</a>
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="/dashboard">Dashboard</a>
                <% if (typeof user !== 'undefined' && user) { %>
                    <a href="/logout" class="btn-login">Logout</a>
                <% } else { %>
                    <a href="/login">Login</a>
                    <a href="/signup" class="btn-login">Get Started</a>
                <% } %>
            </div>
        </nav>
    </header>

    <div class="hero">
        <h1>Welcome to Our Blog</h1>
        <p>Discover stories, thinking, and expertise from writers on any topic.</p>
    </div>

    <div class="container">
        <div class="posts-grid">
            <% if (posts.length > 0) { %>
                <% posts.forEach(post => { %>
                    <article class="post-card">
                        <a href="/post/<%= post._id %>" style="text-decoration: none; color: inherit;">
                            <% if (post.image) { %>
                                <img src="<%= post.image %>" alt="<%= post.title %>" class="post-image">
                            <% } else { %>
                                <div class="post-image" style="display:flex;align-items:center;justify-content:center;color:#999;font-weight:bold;">No Image</div>
                            <% } %>
                        </a>
                        <div class="post-content">
                            <div>
                                <span class="category-badge"><%= post.category ? post.category.name : 'General' %></span>
                            </div>
                            <h2 class="post-title"><a href="/post/<%= post._id %>" style="text-decoration: none; color: inherit;"><%= post.title %></a></h2>
                            <p class="post-excerpt"><%= post.content.substring(0, 120) %>...</p>
                            
                            <% if (post.tags && post.tags.length > 0) { %>
                                <div class="tags">
                                    <% post.tags.forEach(tag => { %>
                                        <span class="tag"><%= tag.name %></span>
                                    <% }) %>
                                </div>
                            <% } %>

                            <div class="post-footer">
                                <span>By <%= post.author.username %></span>
                                <span><%= new Date(post.createdAt).toLocaleDateString() %></span>
                            </div>
                        </div>
                    </article>
                <% }) %>
            <% } else { %>
                <p style="text-align:center; grid-column: 1/-1;">No posts found. Be the first to write!</p>
            <% } %>
        </div>
    </div>
</body>
</html>